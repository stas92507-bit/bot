<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–¥—ã</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      background: linear-gradient(120deg, #45c4e6, #32e6aa 80%, #4f8cfb 100%);
      min-height: 100vh;
      font-family: 'Segoe UI', Verdana, sans-serif;
      color: #094e68;
      padding: 0;
      margin: 0;
    }
    .container {
      max-width: 420px;
      margin: 36px auto 0 auto;
      background: rgba(255,255,255,0.86);
      border-radius: 22px;
      box-shadow: 0 6px 24px #0bc7b533;
      padding: 28px 18px 18px 18px;
    }
    h2 {
      text-align: center;
      margin-bottom: 12px;
      color: #1287a8;
      font-weight: 700;
    }
    .chartbox {
      margin-top: 24px;
      margin-bottom: 24px;
      background: #e8faf6;
      border-radius: 14px;
      padding: 14px 6px;
      box-shadow: 0 2px 10px #62e6c144;
    }
    button {
      width: 100%;
      background: linear-gradient(90deg, #2ee7ff 0, #7afe97 80%);
      color: #044c54;
      font-size: 17px;
      padding: 14px;
      border-radius: 16px;
      border: none;
      font-weight: 700;
      margin-top: 18px;
      cursor: pointer;
      box-shadow: 0 2px 8px #46e7be33;
      transition: .1s;
    }
    button:active {
      filter: brightness(0.92);
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>üíß–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥<br>–∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–¥—ã</h2>
    <div class="chartbox">
      <canvas id="waterChart"></canvas>
    </div>
    <div class="chartbox">
      <canvas id="filterChart"></canvas>
    </div>
    <button onclick="Telegram.WebApp.close();">–ó–∞–∫—Ä—ã—Ç—å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
  </div>
  
  <script>
    // --- –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö. –ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞/–±–æ—Ç–∞!
    const days = ['01.06','02.06','03.06','04.06','05.06','06.06','07.06'];
    const waterAfter = [45, 38, 37, 35, 40, 42, 30];
    const waterBefore = [400, 400, 400, 400, 400, 400, 400];

    // –ì—Ä–∞—Ñ–∏–∫ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–¥—ã –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞
    const ctx1 = document.getElementById('waterChart').getContext('2d');
    new Chart(ctx1, {
      type: 'line',
      data: {
        labels: days,
        datasets: [{
          label: '–ö–∞—á–µ—Å—Ç–≤–æ –≤–æ–¥—ã (ppm)',
          data: waterAfter,
          fill: true,
          borderColor: '#3ac8f7',
          backgroundColor: 'rgba(54, 240, 247, 0.27)',
          pointBackgroundColor: '#17fa96',
          tension: 0.38
        }]
      },
      options: {
        plugins: {
          title: {
            display: true,
            text: '–ö–∞—á–µ—Å—Ç–≤–æ –≤–æ–¥—ã –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞',
            color: '#138c7c',
            font: {weight: 600, size: 18}
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            ticks: {color: '#1287a8'},
            grid: {color: '#baf5ea'}
          },
          x: {ticks: {color: '#1287a8'}}
        }
      }
    });

    // –ì—Ä–∞—Ñ–∏–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä–∞ (%) –ø–æ –¥–Ω—è–º
    const filterEfficiency = waterAfter.map((v, i) => Math.round((1 - v/waterBefore[i])*100));
    const ctx2 = document.getElementById('filterChart').getContext('2d');
    new Chart(ctx2, {
      type: 'bar',
      data: {
        labels: days,
        datasets: [{
          label: '–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (%)',
          data: filterEfficiency,
          backgroundColor: ['#06deab', '#17faeb', '#46c6ff', '#39faad', '#22cae8','#27cfd7','#29c5a8'],
          borderRadius: 7,
        }]
      },
      options: {
        plugins: {
          title: {
            display: true,
            text: '–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –¥–Ω—è–º',
            color: '#1d858b',
            font: {weight: 600, size: 18}
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            max: 100,
            ticks: {color: '#08956a'},
            grid: {color: '#cafef8'}
          },
          x: {ticks: {color: '#08956a'}}
        }
      }
    });
  </script>
</body>
</html>

